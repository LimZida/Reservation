<?xml version="1.0" encoding="UTF-8"?>

<Configuration status="debug" monitorInterval="30" >
	
    <Appenders>
	<!-- 콘솔로그 -->
	<Console name="Console" target="SYSTEM_OUT">
		<PatternLayout pattern="%p %d [%t] [%c] %-15.15M %m%n" />
	</Console>
	
	<!-- bizMOB 에러로그 -->
	<RollingRandomAccessFile name="bizmob-error"
		fileName= "${sys:bizmobCustHome}/logs/bizmob_error.log"
		filePattern="${sys:bizmobCustHome}/logs/$${date:yyyyMMdd}/bizmob_error.%d{yyyyMMdd}-%i.log.zip"
		immediateFlush="false" append="false">
		<PatternLayout pattern="%p %d [%t] [%c] %-15.15M %m%n" />
		<Policies>
			<TimeBasedTriggeringPolicy interval="1" modulate="true"/>
		</Policies>
	</RollingRandomAccessFile>
	
	<!-- bizmob 일반로그 -->
	<RollingRandomAccessFile name="bizmob"
		fileName="${sys:bizmobCustHome}/logs/bizmob.log"
		filePattern="${sys:bizmobCustHome}/logs/$${date:yyyyMMdd}/bizmob_debug.%d{yyyyMMdd}-%i.log.zip"
		immediateFlush="false" append="true">
		<PatternLayout pattern="%p %d [%t] [%c] %M %m%n" />
		<Policies>
			<TimeBasedTriggeringPolicy interval="1" modulate="true"/>
		</Policies>
	</RollingRandomAccessFile>
	
	<Async name="Async-log">
		<AppenderRef ref="bizmob" />
	</Async>
	<Async name="Async-error">
		<AppenderRef ref="bizmob-error" />
	</Async>
	</Appenders>
	
	<Loggers>
		<Root level="DEBUG" additivity="false">
			<AppenderRef ref="Console"/>
			<AppenderRef ref="Async-log"/>
			<AppenderRef ref="Async-error"/>
		</Root>
		
		 
		<Logger name="org.springframework" additivity="false">
			<AppenderRef ref="Console" level="INFO" />
			<AppenderRef ref="Async-log" level="WARN" />
			<AppenderRef ref="Async-error" level="WARN" />
		</Logger>
		 
		<Logger name="org.apache" level="WARN" additivity="false">
			<appender-ref ref="Async-error" />
			<appender-ref ref="Async-db-debug" />
		</Logger>
		
		<Logger name="net.sf.ehcache" level="WARN" additivity="false">
			<appender-ref ref="Async-error" />
			<appender-ref ref="Async-db-debug" />
		</Logger>
	</Loggers>
</Configuration>